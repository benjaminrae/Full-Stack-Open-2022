{"ast":null,"code":"import _objectSpread from\"C:/Users/Ben/Documents/programming/fullstackopen/part2/phonebook/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"C:/Users/Ben/Documents/programming/fullstackopen/part2/phonebook/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useState,useEffect}from\"react\";import axios from\"axios\";import PersonForm from\"./Components/PersonForm\";import Filter from\"./Components/Filter\";import Persons from\"./Components/Persons\";import personService from\"./services/persons\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Notification=function Notification(_ref){var message=_ref.message;if(message===null){return null;}return/*#__PURE__*/_jsx(\"div\",{className:\"notification\",children:message});};var Error=function Error(_ref2){var message=_ref2.message;if(message===null){return null;}return/*#__PURE__*/_jsx(\"div\",{className:\"error\",children:message});};var App=function App(){var _useState=useState([{name:\"Arto Hellas\",number:\"040-123456\",id:1},{name:\"Ada Lovelace\",number:\"39-44-5323523\",id:2},{name:\"Dan Abramov\",number:\"12-43-234345\",id:3},{name:\"Mary Poppendieck\",number:\"39-23-6423122\",id:4}]),_useState2=_slicedToArray(_useState,2),persons=_useState2[0],setPersons=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),newName=_useState4[0],setNewName=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),newNumber=_useState6[0],setNewNumber=_useState6[1];var _useState7=useState(\"\"),_useState8=_slicedToArray(_useState7,2),newSearch=_useState8[0],setNewSearch=_useState8[1];var _useState9=useState(null),_useState10=_slicedToArray(_useState9,2),notificationMessage=_useState10[0],setNotificationMessage=_useState10[1];var _useState11=useState(null),_useState12=_slicedToArray(_useState11,2),errorMessage=_useState12[0],setErrorMessage=_useState12[1];useEffect(function(){console.log(\"effect\");personService.getAll().then(function(response){console.log(\"promise fulfilled\");setPersons(response);});},[]);var addPerson=function addPerson(event){event.preventDefault();console.log(\"button clicked\",event.target);if(checkDuplicateNames){window.confirm(\"\".concat(newName,\" is already in the phonebook, do you want to replace the old number with a new one? \"))?updatePhoneNumber(newName,newNumber):console.log(\"cancelled\");setNewName(\"\");setNewNumber(\"\");setNotificationMessage(\"\".concat(newName,\" updated\"));setTimeout(function(){setNotificationMessage(null);},5000);return;}var person={name:newName,number:newNumber};personService.create(person).then(function(response){console.log(\"response\",response);setPersons(persons.concat(response));setNewName(\"\");setNewNumber(\"\");});setNotificationMessage(\"\".concat(newName,\" added\"));setTimeout(function(){setNotificationMessage(null);},5000);};var deletePerson=function deletePerson(event){event.preventDefault();console.log(\"button clicked\",event.target.value);if(window.confirm(\"Delete \".concat(event.target.name,\"?\"))){personService.remove(event.target.value).then(function(response){console.log(response);personService.getAll().then(function(response){return setPersons(response);});setNotificationMessage(\"\".concat(event.target.name,\" deleted\"));setTimeout(function(){setNotificationMessage(null);},5000);}).catch(function(error){setErrorMessage(\"\".concat(event.target.name,\" already deleted from server\"));setTimeout(function(){setErrorMessage(null);},5000);personService.getAll().then(function(response){return setPersons(response);});});}else{setErrorMessage(\"Delete cancelled\");setTimeout(function(){setErrorMessage(null);},5000);console.log(\"Delete cancelled\");}};var handleNameChange=function handleNameChange(event){console.log(event.target.value);setNewName(event.target.value);};var handleNumberChange=function handleNumberChange(event){console.log(event.target.value);setNewNumber(event.target.value);};var handleSearchChange=function handleSearchChange(event){console.log(event.target.value);setNewSearch(event.target.value);};var checkDuplicateNames=persons?persons.some(function(person){return person.name===newName;}):null;var updatePhoneNumber=function updatePhoneNumber(name,newNumber){var personToUpdate=persons.find(function(person){return person.name===name;});var updatedPerson=_objectSpread(_objectSpread({},personToUpdate),{},{number:newNumber});personService.update(updatedPerson.id,updatedPerson).then(function(returnedPerson){personService.getAll().then(function(result){return setPersons(result);});});};var personsToShow=persons.filter(function(person){return newSearch?person.name.toLowerCase().includes(newSearch.toLowerCase()):person;});return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Phonebook\"}),/*#__PURE__*/_jsx(Notification,{message:notificationMessage}),/*#__PURE__*/_jsx(Error,{message:errorMessage}),/*#__PURE__*/_jsx(Filter,{value:newSearch,onChange:handleSearchChange}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"h2\",{children:\"add a new\"})}),/*#__PURE__*/_jsx(PersonForm,{nameValue:newName,nameOnChange:handleNameChange,numberValue:newNumber,numberOnChange:handleNumberChange,buttonOnClick:addPerson}),/*#__PURE__*/_jsx(\"h2\",{children:\"Numbers\"}),/*#__PURE__*/_jsx(Persons,{persons:personsToShow,deleteOnClick:deletePerson})]});};export default App;","map":{"version":3,"names":["useState","useEffect","axios","PersonForm","Filter","Persons","personService","Notification","message","Error","App","name","number","id","persons","setPersons","newName","setNewName","newNumber","setNewNumber","newSearch","setNewSearch","notificationMessage","setNotificationMessage","errorMessage","setErrorMessage","console","log","getAll","then","response","addPerson","event","preventDefault","target","checkDuplicateNames","window","confirm","updatePhoneNumber","setTimeout","person","create","concat","deletePerson","value","remove","catch","error","handleNameChange","handleNumberChange","handleSearchChange","some","personToUpdate","find","updatedPerson","update","returnedPerson","result","personsToShow","filter","toLowerCase","includes"],"sources":["C:/Users/Ben/Documents/programming/fullstackopen/part2/phonebook/src/App.js"],"sourcesContent":["import { useState, useEffect } from \"react\";\nimport axios from \"axios\";\nimport PersonForm from \"./Components/PersonForm\";\nimport Filter from \"./Components/Filter\";\nimport Persons from \"./Components/Persons\";\nimport personService from \"./services/persons\";\n\nconst Notification = ({ message }) => {\n    if (message === null) {\n        return null;\n    }\n    return <div className=\"notification\">{message}</div>;\n};\n\nconst Error = ({ message }) => {\n    if (message === null) {\n        return null;\n    }\n    return <div className=\"error\">{message}</div>;\n};\n\nconst App = () => {\n    const [persons, setPersons] = useState([\n        { name: \"Arto Hellas\", number: \"040-123456\", id: 1 },\n        { name: \"Ada Lovelace\", number: \"39-44-5323523\", id: 2 },\n        { name: \"Dan Abramov\", number: \"12-43-234345\", id: 3 },\n        { name: \"Mary Poppendieck\", number: \"39-23-6423122\", id: 4 },\n    ]);\n    const [newName, setNewName] = useState(\"\");\n    const [newNumber, setNewNumber] = useState(\"\");\n    const [newSearch, setNewSearch] = useState(\"\");\n    const [notificationMessage, setNotificationMessage] = useState(null);\n    const [errorMessage, setErrorMessage] = useState(null);\n\n    useEffect(() => {\n        console.log(\"effect\");\n        personService.getAll().then((response) => {\n            console.log(\"promise fulfilled\");\n            setPersons(response);\n        });\n    }, []);\n\n    const addPerson = (event) => {\n        event.preventDefault();\n        console.log(\"button clicked\", event.target);\n        if (checkDuplicateNames) {\n            window.confirm(\n                `${newName} is already in the phonebook, do you want to replace the old number with a new one? `\n            )\n                ? updatePhoneNumber(newName, newNumber)\n                : console.log(\"cancelled\");\n            setNewName(\"\");\n            setNewNumber(\"\");\n            setNotificationMessage(`${newName} updated`);\n            setTimeout(() => {\n                setNotificationMessage(null);\n            }, 5000);\n            return;\n        }\n        const person = {\n            name: newName,\n            number: newNumber,\n        };\n        personService.create(person).then((response) => {\n            console.log(\"response\", response);\n            setPersons(persons.concat(response));\n            setNewName(\"\");\n            setNewNumber(\"\");\n        });\n        setNotificationMessage(`${newName} added`);\n        setTimeout(() => {\n            setNotificationMessage(null);\n        }, 5000);\n    };\n\n    const deletePerson = (event) => {\n        event.preventDefault();\n        console.log(\"button clicked\", event.target.value);\n        if (window.confirm(`Delete ${event.target.name}?`)) {\n            personService\n                .remove(event.target.value)\n                .then((response) => {\n                    console.log(response);\n                    personService\n                        .getAll()\n                        .then((response) => setPersons(response));\n                    setNotificationMessage(`${event.target.name} deleted`);\n                    setTimeout(() => {\n                        setNotificationMessage(null);\n                    }, 5000);\n                })\n                .catch((error) => {\n                    setErrorMessage(\n                        `${event.target.name} already deleted from server`\n                    );\n                    setTimeout(() => {\n                        setErrorMessage(null);\n                    }, 5000);\n                    personService\n                        .getAll()\n                        .then((response) => setPersons(response));\n                });\n        } else {\n            setErrorMessage(`Delete cancelled`);\n            setTimeout(() => {\n                setErrorMessage(null);\n            }, 5000);\n            console.log(\"Delete cancelled\");\n        }\n    };\n\n    const handleNameChange = (event) => {\n        console.log(event.target.value);\n        setNewName(event.target.value);\n    };\n\n    const handleNumberChange = (event) => {\n        console.log(event.target.value);\n        setNewNumber(event.target.value);\n    };\n\n    const handleSearchChange = (event) => {\n        console.log(event.target.value);\n        setNewSearch(event.target.value);\n    };\n\n    const checkDuplicateNames = persons\n        ? persons.some((person) => person.name === newName)\n        : null;\n\n    const updatePhoneNumber = (name, newNumber) => {\n        const personToUpdate = persons.find((person) => person.name === name);\n        const updatedPerson = { ...personToUpdate, number: newNumber };\n        personService\n            .update(updatedPerson.id, updatedPerson)\n            .then((returnedPerson) => {\n                personService.getAll().then((result) => setPersons(result));\n            });\n    };\n\n    const personsToShow = persons.filter((person) =>\n        newSearch\n            ? person.name.toLowerCase().includes(newSearch.toLowerCase())\n            : person\n    );\n\n    return (\n        <div>\n            <h2>Phonebook</h2>\n            <Notification message={notificationMessage} />\n            <Error message={errorMessage} />\n            <Filter value={newSearch} onChange={handleSearchChange} />\n            <div>\n                <h2>add a new</h2>\n            </div>\n            <PersonForm\n                nameValue={newName}\n                nameOnChange={handleNameChange}\n                numberValue={newNumber}\n                numberOnChange={handleNumberChange}\n                buttonOnClick={addPerson}\n            />\n            <h2>Numbers</h2>\n            <Persons persons={personsToShow} deleteOnClick={deletePerson} />\n        </div>\n    );\n};\n\nexport default App;\n"],"mappings":"2SAAA,OAASA,QAAT,CAAmBC,SAAnB,KAAoC,OAApC,CACA,MAAOC,MAAP,KAAkB,OAAlB,CACA,MAAOC,WAAP,KAAuB,yBAAvB,CACA,MAAOC,OAAP,KAAmB,qBAAnB,CACA,MAAOC,QAAP,KAAoB,sBAApB,CACA,MAAOC,cAAP,KAA0B,oBAA1B,C,wFAEA,GAAMC,aAAY,CAAG,QAAfA,aAAe,MAAiB,IAAdC,QAAc,MAAdA,OAAc,CAClC,GAAIA,OAAO,GAAK,IAAhB,CAAsB,CAClB,MAAO,KAAP,CACH,CACD,mBAAO,YAAK,SAAS,CAAC,cAAf,UAA+BA,OAA/B,EAAP,CACH,CALD,CAOA,GAAMC,MAAK,CAAG,QAARA,MAAQ,OAAiB,IAAdD,QAAc,OAAdA,OAAc,CAC3B,GAAIA,OAAO,GAAK,IAAhB,CAAsB,CAClB,MAAO,KAAP,CACH,CACD,mBAAO,YAAK,SAAS,CAAC,OAAf,UAAwBA,OAAxB,EAAP,CACH,CALD,CAOA,GAAME,IAAG,CAAG,QAANA,IAAM,EAAM,CACd,cAA8BV,QAAQ,CAAC,CACnC,CAAEW,IAAI,CAAE,aAAR,CAAuBC,MAAM,CAAE,YAA/B,CAA6CC,EAAE,CAAE,CAAjD,CADmC,CAEnC,CAAEF,IAAI,CAAE,cAAR,CAAwBC,MAAM,CAAE,eAAhC,CAAiDC,EAAE,CAAE,CAArD,CAFmC,CAGnC,CAAEF,IAAI,CAAE,aAAR,CAAuBC,MAAM,CAAE,cAA/B,CAA+CC,EAAE,CAAE,CAAnD,CAHmC,CAInC,CAAEF,IAAI,CAAE,kBAAR,CAA4BC,MAAM,CAAE,eAApC,CAAqDC,EAAE,CAAE,CAAzD,CAJmC,CAAD,CAAtC,wCAAOC,OAAP,eAAgBC,UAAhB,eAMA,eAA8Bf,QAAQ,CAAC,EAAD,CAAtC,yCAAOgB,OAAP,eAAgBC,UAAhB,eACA,eAAkCjB,QAAQ,CAAC,EAAD,CAA1C,yCAAOkB,SAAP,eAAkBC,YAAlB,eACA,eAAkCnB,QAAQ,CAAC,EAAD,CAA1C,yCAAOoB,SAAP,eAAkBC,YAAlB,eACA,eAAsDrB,QAAQ,CAAC,IAAD,CAA9D,0CAAOsB,mBAAP,gBAA4BC,sBAA5B,gBACA,gBAAwCvB,QAAQ,CAAC,IAAD,CAAhD,2CAAOwB,YAAP,gBAAqBC,eAArB,gBAEAxB,SAAS,CAAC,UAAM,CACZyB,OAAO,CAACC,GAAR,CAAY,QAAZ,EACArB,aAAa,CAACsB,MAAd,GAAuBC,IAAvB,CAA4B,SAACC,QAAD,CAAc,CACtCJ,OAAO,CAACC,GAAR,CAAY,mBAAZ,EACAZ,UAAU,CAACe,QAAD,CAAV,CACH,CAHD,EAIH,CANQ,CAMN,EANM,CAAT,CAQA,GAAMC,UAAS,CAAG,QAAZA,UAAY,CAACC,KAAD,CAAW,CACzBA,KAAK,CAACC,cAAN,GACAP,OAAO,CAACC,GAAR,CAAY,gBAAZ,CAA8BK,KAAK,CAACE,MAApC,EACA,GAAIC,mBAAJ,CAAyB,CACrBC,MAAM,CAACC,OAAP,WACOrB,OADP,0FAGMsB,iBAAiB,CAACtB,OAAD,CAAUE,SAAV,CAHvB,CAIMQ,OAAO,CAACC,GAAR,CAAY,WAAZ,CAJN,CAKAV,UAAU,CAAC,EAAD,CAAV,CACAE,YAAY,CAAC,EAAD,CAAZ,CACAI,sBAAsB,WAAIP,OAAJ,aAAtB,CACAuB,UAAU,CAAC,UAAM,CACbhB,sBAAsB,CAAC,IAAD,CAAtB,CACH,CAFS,CAEP,IAFO,CAAV,CAGA,OACH,CACD,GAAMiB,OAAM,CAAG,CACX7B,IAAI,CAAEK,OADK,CAEXJ,MAAM,CAAEM,SAFG,CAAf,CAIAZ,aAAa,CAACmC,MAAd,CAAqBD,MAArB,EAA6BX,IAA7B,CAAkC,SAACC,QAAD,CAAc,CAC5CJ,OAAO,CAACC,GAAR,CAAY,UAAZ,CAAwBG,QAAxB,EACAf,UAAU,CAACD,OAAO,CAAC4B,MAAR,CAAeZ,QAAf,CAAD,CAAV,CACAb,UAAU,CAAC,EAAD,CAAV,CACAE,YAAY,CAAC,EAAD,CAAZ,CACH,CALD,EAMAI,sBAAsB,WAAIP,OAAJ,WAAtB,CACAuB,UAAU,CAAC,UAAM,CACbhB,sBAAsB,CAAC,IAAD,CAAtB,CACH,CAFS,CAEP,IAFO,CAAV,CAGH,CA/BD,CAiCA,GAAMoB,aAAY,CAAG,QAAfA,aAAe,CAACX,KAAD,CAAW,CAC5BA,KAAK,CAACC,cAAN,GACAP,OAAO,CAACC,GAAR,CAAY,gBAAZ,CAA8BK,KAAK,CAACE,MAAN,CAAaU,KAA3C,EACA,GAAIR,MAAM,CAACC,OAAP,kBAAyBL,KAAK,CAACE,MAAN,CAAavB,IAAtC,MAAJ,CAAoD,CAChDL,aAAa,CACRuC,MADL,CACYb,KAAK,CAACE,MAAN,CAAaU,KADzB,EAEKf,IAFL,CAEU,SAACC,QAAD,CAAc,CAChBJ,OAAO,CAACC,GAAR,CAAYG,QAAZ,EACAxB,aAAa,CACRsB,MADL,GAEKC,IAFL,CAEU,SAACC,QAAD,QAAcf,WAAU,CAACe,QAAD,CAAxB,EAFV,EAGAP,sBAAsB,WAAIS,KAAK,CAACE,MAAN,CAAavB,IAAjB,aAAtB,CACA4B,UAAU,CAAC,UAAM,CACbhB,sBAAsB,CAAC,IAAD,CAAtB,CACH,CAFS,CAEP,IAFO,CAAV,CAGH,CAXL,EAYKuB,KAZL,CAYW,SAACC,KAAD,CAAW,CACdtB,eAAe,WACRO,KAAK,CAACE,MAAN,CAAavB,IADL,iCAAf,CAGA4B,UAAU,CAAC,UAAM,CACbd,eAAe,CAAC,IAAD,CAAf,CACH,CAFS,CAEP,IAFO,CAAV,CAGAnB,aAAa,CACRsB,MADL,GAEKC,IAFL,CAEU,SAACC,QAAD,QAAcf,WAAU,CAACe,QAAD,CAAxB,EAFV,EAGH,CAtBL,EAuBH,CAxBD,IAwBO,CACHL,eAAe,oBAAf,CACAc,UAAU,CAAC,UAAM,CACbd,eAAe,CAAC,IAAD,CAAf,CACH,CAFS,CAEP,IAFO,CAAV,CAGAC,OAAO,CAACC,GAAR,CAAY,kBAAZ,EACH,CACJ,CAlCD,CAoCA,GAAMqB,iBAAgB,CAAG,QAAnBA,iBAAmB,CAAChB,KAAD,CAAW,CAChCN,OAAO,CAACC,GAAR,CAAYK,KAAK,CAACE,MAAN,CAAaU,KAAzB,EACA3B,UAAU,CAACe,KAAK,CAACE,MAAN,CAAaU,KAAd,CAAV,CACH,CAHD,CAKA,GAAMK,mBAAkB,CAAG,QAArBA,mBAAqB,CAACjB,KAAD,CAAW,CAClCN,OAAO,CAACC,GAAR,CAAYK,KAAK,CAACE,MAAN,CAAaU,KAAzB,EACAzB,YAAY,CAACa,KAAK,CAACE,MAAN,CAAaU,KAAd,CAAZ,CACH,CAHD,CAKA,GAAMM,mBAAkB,CAAG,QAArBA,mBAAqB,CAAClB,KAAD,CAAW,CAClCN,OAAO,CAACC,GAAR,CAAYK,KAAK,CAACE,MAAN,CAAaU,KAAzB,EACAvB,YAAY,CAACW,KAAK,CAACE,MAAN,CAAaU,KAAd,CAAZ,CACH,CAHD,CAKA,GAAMT,oBAAmB,CAAGrB,OAAO,CAC7BA,OAAO,CAACqC,IAAR,CAAa,SAACX,MAAD,QAAYA,OAAM,CAAC7B,IAAP,GAAgBK,OAA5B,EAAb,CAD6B,CAE7B,IAFN,CAIA,GAAMsB,kBAAiB,CAAG,QAApBA,kBAAoB,CAAC3B,IAAD,CAAOO,SAAP,CAAqB,CAC3C,GAAMkC,eAAc,CAAGtC,OAAO,CAACuC,IAAR,CAAa,SAACb,MAAD,QAAYA,OAAM,CAAC7B,IAAP,GAAgBA,IAA5B,EAAb,CAAvB,CACA,GAAM2C,cAAa,gCAAQF,cAAR,MAAwBxC,MAAM,CAAEM,SAAhC,EAAnB,CACAZ,aAAa,CACRiD,MADL,CACYD,aAAa,CAACzC,EAD1B,CAC8ByC,aAD9B,EAEKzB,IAFL,CAEU,SAAC2B,cAAD,CAAoB,CACtBlD,aAAa,CAACsB,MAAd,GAAuBC,IAAvB,CAA4B,SAAC4B,MAAD,QAAY1C,WAAU,CAAC0C,MAAD,CAAtB,EAA5B,EACH,CAJL,EAKH,CARD,CAUA,GAAMC,cAAa,CAAG5C,OAAO,CAAC6C,MAAR,CAAe,SAACnB,MAAD,QACjCpB,UAAS,CACHoB,MAAM,CAAC7B,IAAP,CAAYiD,WAAZ,GAA0BC,QAA1B,CAAmCzC,SAAS,CAACwC,WAAV,EAAnC,CADG,CAEHpB,MAH2B,EAAf,CAAtB,CAMA,mBACI,oCACI,iCADJ,cAEI,KAAC,YAAD,EAAc,OAAO,CAAElB,mBAAvB,EAFJ,cAGI,KAAC,KAAD,EAAO,OAAO,CAAEE,YAAhB,EAHJ,cAII,KAAC,MAAD,EAAQ,KAAK,CAAEJ,SAAf,CAA0B,QAAQ,CAAE8B,kBAApC,EAJJ,cAKI,kCACI,iCADJ,EALJ,cAQI,KAAC,UAAD,EACI,SAAS,CAAElC,OADf,CAEI,YAAY,CAAEgC,gBAFlB,CAGI,WAAW,CAAE9B,SAHjB,CAII,cAAc,CAAE+B,kBAJpB,CAKI,aAAa,CAAElB,SALnB,EARJ,cAeI,+BAfJ,cAgBI,KAAC,OAAD,EAAS,OAAO,CAAE2B,aAAlB,CAAiC,aAAa,CAAEf,YAAhD,EAhBJ,GADJ,CAoBH,CAjJD,CAmJA,cAAejC,IAAf"},"metadata":{},"sourceType":"module"}