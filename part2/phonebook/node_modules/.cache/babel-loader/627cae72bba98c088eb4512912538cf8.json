{"ast":null,"code":"import _objectSpread from\"C:/Users/Ben/Documents/programming/fullstackopen/part2/phonebook/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"C:/Users/Ben/Documents/programming/fullstackopen/part2/phonebook/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useState,useEffect}from\"react\";import PersonForm from\"./Components/PersonForm\";import Filter from\"./Components/Filter\";import Persons from\"./Components/Persons\";import personService from\"./services/persons\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Notification=function Notification(_ref){var message=_ref.message;if(message===null){return null;}return/*#__PURE__*/_jsx(\"div\",{className:\"notification\",children:message});};var Error=function Error(_ref2){var message=_ref2.message;if(message===null){return null;}return/*#__PURE__*/_jsx(\"div\",{className:\"error\",children:message});};var App=function App(){var _useState=useState([{name:\"Arto Hellas\",number:\"040-123456\",id:1},{name:\"Ada Lovelace\",number:\"39-44-5323523\",id:2},{name:\"Dan Abramov\",number:\"12-43-234345\",id:3},{name:\"Mary Poppendieck\",number:\"39-23-6423122\",id:4}]),_useState2=_slicedToArray(_useState,2),persons=_useState2[0],setPersons=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),newName=_useState4[0],setNewName=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),newNumber=_useState6[0],setNewNumber=_useState6[1];var _useState7=useState(\"\"),_useState8=_slicedToArray(_useState7,2),newSearch=_useState8[0],setNewSearch=_useState8[1];var _useState9=useState(null),_useState10=_slicedToArray(_useState9,2),notificationMessage=_useState10[0],setNotificationMessage=_useState10[1];var _useState11=useState(null),_useState12=_slicedToArray(_useState11,2),errorMessage=_useState12[0],setErrorMessage=_useState12[1];useEffect(function(){personService.getAll().then(function(response){console.log(\"promise fulfilled\");setPersons(response);});},[]);var addPerson=function addPerson(event){event.preventDefault();if(checkDuplicateNames){window.confirm(\"\".concat(newName,\" is already in the phonebook, do you want to replace the old number with a new one? \"))?updatePhoneNumber(newName,newNumber):setErrorMessage(\"update cancelled\");setTimeout(function(){setErrorMessage(null);},5000);setNewName(\"\");setNewNumber(\"\");return;}var person={name:newName,number:newNumber};personService.create(person).then(function(response){setPersons(persons.concat(response));setNewName(\"\");setNewNumber(\"\");setNotificationMessage(\"\".concat(newName,\" added\"));}).catch(function(error){setErrorMessage(error.response.data.error);setTimeout(function(){setErrorMessage(null);},5000);});};var deletePerson=function deletePerson(event){event.preventDefault();if(window.confirm(\"Delete \".concat(event.target.name,\"?\"))){personService.remove(event.target.value).then(function(response){personService.getAll().then(function(response){return setPersons(response);});setNotificationMessage(\"\".concat(event.target.name,\" deleted\"));setTimeout(function(){setNotificationMessage(null);},5000);}).catch(function(error){setErrorMessage(\"\".concat(event.target.name,\" already deleted from server\"));setTimeout(function(){setErrorMessage(null);},5000);personService.getAll().then(function(response){return setPersons(response);});});}else{setErrorMessage(\"Delete cancelled\");setTimeout(function(){setErrorMessage(null);},5000);console.log(\"Delete cancelled\");}};var handleNameChange=function handleNameChange(event){setNewName(event.target.value);};var handleNumberChange=function handleNumberChange(event){setNewNumber(event.target.value);};var handleSearchChange=function handleSearchChange(event){setNewSearch(event.target.value);};var checkDuplicateNames=persons?persons.some(function(person){return person.name===newName;}):null;var updatePhoneNumber=function updatePhoneNumber(name,newNumber){var personToUpdate=persons.find(function(person){return person.name===name;});var updatedPerson=_objectSpread(_objectSpread({},personToUpdate),{},{number:newNumber});personService.update(updatedPerson.id,updatedPerson).then(function(returnedPerson){personService.getAll().then(function(result){setPersons(result);setNotificationMessage(\"\".concat(newName,\" updated\"));setTimeout(function(){setNotificationMessage(null);},5000);});}).catch(function(error){setErrorMessage(error.response.data.error);setTimeout(function(){setErrorMessage(null);},5000);});};var personsToShow=persons.filter(function(person){return newSearch?person.name.toLowerCase().includes(newSearch.toLowerCase()):person;});return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Phonebook\"}),/*#__PURE__*/_jsx(Notification,{message:notificationMessage}),/*#__PURE__*/_jsx(Error,{message:errorMessage}),/*#__PURE__*/_jsx(Filter,{value:newSearch,onChange:handleSearchChange}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"h2\",{children:\"add a new\"})}),/*#__PURE__*/_jsx(PersonForm,{nameValue:newName,nameOnChange:handleNameChange,numberValue:newNumber,numberOnChange:handleNumberChange,buttonOnClick:addPerson}),/*#__PURE__*/_jsx(\"h2\",{children:\"Numbers\"}),/*#__PURE__*/_jsx(Persons,{persons:personsToShow,deleteOnClick:deletePerson})]});};export default App;","map":{"version":3,"names":["useState","useEffect","PersonForm","Filter","Persons","personService","Notification","message","Error","App","name","number","id","persons","setPersons","newName","setNewName","newNumber","setNewNumber","newSearch","setNewSearch","notificationMessage","setNotificationMessage","errorMessage","setErrorMessage","getAll","then","response","console","log","addPerson","event","preventDefault","checkDuplicateNames","window","confirm","updatePhoneNumber","setTimeout","person","create","concat","catch","error","data","deletePerson","target","remove","value","handleNameChange","handleNumberChange","handleSearchChange","some","personToUpdate","find","updatedPerson","update","returnedPerson","result","personsToShow","filter","toLowerCase","includes"],"sources":["C:/Users/Ben/Documents/programming/fullstackopen/part2/phonebook/src/App.js"],"sourcesContent":["import { useState, useEffect } from \"react\";\nimport PersonForm from \"./Components/PersonForm\";\nimport Filter from \"./Components/Filter\";\nimport Persons from \"./Components/Persons\";\nimport personService from \"./services/persons\";\n\nconst Notification = ({ message }) => {\n    if (message === null) {\n        return null;\n    }\n    return <div className=\"notification\">{message}</div>;\n};\n\nconst Error = ({ message }) => {\n    if (message === null) {\n        return null;\n    }\n    return <div className=\"error\">{message}</div>;\n};\n\nconst App = () => {\n    const [persons, setPersons] = useState([\n        { name: \"Arto Hellas\", number: \"040-123456\", id: 1 },\n        { name: \"Ada Lovelace\", number: \"39-44-5323523\", id: 2 },\n        { name: \"Dan Abramov\", number: \"12-43-234345\", id: 3 },\n        { name: \"Mary Poppendieck\", number: \"39-23-6423122\", id: 4 },\n    ]);\n    const [newName, setNewName] = useState(\"\");\n    const [newNumber, setNewNumber] = useState(\"\");\n    const [newSearch, setNewSearch] = useState(\"\");\n    const [notificationMessage, setNotificationMessage] = useState(null);\n    const [errorMessage, setErrorMessage] = useState(null);\n\n    useEffect(() => {\n        personService.getAll().then((response) => {\n            console.log(\"promise fulfilled\");\n            setPersons(response);\n        });\n    }, []);\n\n    const addPerson = (event) => {\n        event.preventDefault();\n\n        if (checkDuplicateNames) {\n            window.confirm(\n                `${newName} is already in the phonebook, do you want to replace the old number with a new one? `\n            )\n                ? updatePhoneNumber(newName, newNumber)\n                : setErrorMessage(\"update cancelled\");\n            setTimeout(() => {\n                setErrorMessage(null);\n            }, 5000);\n            setNewName(\"\");\n            setNewNumber(\"\");\n            return;\n        }\n        const person = {\n            name: newName,\n            number: newNumber,\n        };\n        personService\n            .create(person)\n            .then((response) => {\n                setPersons(persons.concat(response));\n                setNewName(\"\");\n                setNewNumber(\"\");\n                setNotificationMessage(`${newName} added`);\n            })\n            .catch((error) => {\n                setErrorMessage(error.response.data.error);\n                setTimeout(() => {\n                    setErrorMessage(null);\n                }, 5000);\n            });\n    };\n\n    const deletePerson = (event) => {\n        event.preventDefault();\n        if (window.confirm(`Delete ${event.target.name}?`)) {\n            personService\n                .remove(event.target.value)\n                .then((response) => {\n                    personService\n                        .getAll()\n                        .then((response) => setPersons(response));\n                    setNotificationMessage(`${event.target.name} deleted`);\n                    setTimeout(() => {\n                        setNotificationMessage(null);\n                    }, 5000);\n                })\n                .catch((error) => {\n                    setErrorMessage(\n                        `${event.target.name} already deleted from server`\n                    );\n                    setTimeout(() => {\n                        setErrorMessage(null);\n                    }, 5000);\n                    personService\n                        .getAll()\n                        .then((response) => setPersons(response));\n                });\n        } else {\n            setErrorMessage(`Delete cancelled`);\n            setTimeout(() => {\n                setErrorMessage(null);\n            }, 5000);\n            console.log(\"Delete cancelled\");\n        }\n    };\n\n    const handleNameChange = (event) => {\n        setNewName(event.target.value);\n    };\n\n    const handleNumberChange = (event) => {\n        setNewNumber(event.target.value);\n    };\n\n    const handleSearchChange = (event) => {\n        setNewSearch(event.target.value);\n    };\n\n    const checkDuplicateNames = persons\n        ? persons.some((person) => person.name === newName)\n        : null;\n\n    const updatePhoneNumber = (name, newNumber) => {\n        const personToUpdate = persons.find((person) => person.name === name);\n        const updatedPerson = { ...personToUpdate, number: newNumber };\n        personService\n            .update(updatedPerson.id, updatedPerson)\n            .then((returnedPerson) => {\n                personService.getAll().then((result) => {\n                    setPersons(result);\n                    setNotificationMessage(`${newName} updated`);\n                    setTimeout(() => {\n                        setNotificationMessage(null);\n                    }, 5000);\n                });\n            })\n            .catch((error) => {\n                setErrorMessage(error.response.data.error);\n                setTimeout(() => {\n                    setErrorMessage(null);\n                }, 5000);\n            });\n    };\n\n    const personsToShow = persons.filter((person) =>\n        newSearch\n            ? person.name.toLowerCase().includes(newSearch.toLowerCase())\n            : person\n    );\n\n    return (\n        <div>\n            <h2>Phonebook</h2>\n            <Notification message={notificationMessage} />\n            <Error message={errorMessage} />\n            <Filter value={newSearch} onChange={handleSearchChange} />\n            <div>\n                <h2>add a new</h2>\n            </div>\n            <PersonForm\n                nameValue={newName}\n                nameOnChange={handleNameChange}\n                numberValue={newNumber}\n                numberOnChange={handleNumberChange}\n                buttonOnClick={addPerson}\n            />\n            <h2>Numbers</h2>\n            <Persons persons={personsToShow} deleteOnClick={deletePerson} />\n        </div>\n    );\n};\n\nexport default App;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}